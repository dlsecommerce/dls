module.exports=[35643,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(91557),e=a.i(6015),f=a.i(44902),g=a.i(72131),h=a.i(14574),i=a.i(94202),j=a.i(28193),k=a.i(73570),l=a.i(46271),m=a.i(74167);function n({open:a,onOpenChange:c,count:d,selectedRows:e,onAfterDelete:f}){let[n,o]=(0,g.useState)(!1),p=async()=>{if(!e?.length)return void alert("Nenhum item selecionado para exclusÃ£o.");o(!0);try{console.log("ðŸ” selectedRows recebidos:",e);let a=e.reduce((a,b)=>{let c=String(b.Loja||"").trim(),d=c.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,""),e="",f="";if(d.includes("pikot")||"pk"===d)e="anuncios_pk",f="PK";else{if(!(d.includes("sobaquetas")||d.includes("sÃ³baquetas"))&&"sb"!==d)return console.warn("âŒ Loja nÃ£o reconhecida:",c),a;e="anuncios_sb",f="SB"}let g=String(b.ID??"").trim();if(!g)return a;let h=`${e}|${f}`;return(a[h]||=[]).push(g),a},{}),b=Object.entries(a);if(0===b.length)return void alert("Nenhum anÃºncio vÃ¡lido para exclusÃ£o (verifique loja/ID).");let d=b.map(async([a,b])=>{let[c,d]=a.split("|");console.log(`ðŸ—‘ï¸ Excluindo da ${c}`,b);let{error:e}=await m.supabase.from(c).delete().in("ID",b).eq("Loja",d);if(e)throw e});await Promise.all(d),f(),c(!1)}catch(a){console.error("Erro ao excluir:",a),alert("Erro ao excluir anÃºncios: "+(a.message||a))}finally{o(!1)}};return(0,b.jsx)(h.Dialog,{open:a,onOpenChange:a=>!n&&c(a),children:(0,b.jsxs)(h.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl text-white max-w-md shadow-2xl",children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsxs)(h.DialogTitle,{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-red-400"}),"Excluir AnÃºncio(s)"]})}),(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"mt-3 space-y-3",children:[(0,b.jsxs)("p",{className:"text-neutral-300",children:["Deseja realmente excluir"," ",(0,b.jsx)("span",{className:"text-white font-semibold",children:d})," ",1===d?"anÃºncio selecionado":"anÃºncios selecionados","?"]}),(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-sm text-red-300 flex items-start gap-2",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{className:"text-red-400",children:"AtenÃ§Ã£o:"})," Esta aÃ§Ã£o Ã© permanente e nÃ£o poderÃ¡ ser desfeita."]})]})]}),(0,b.jsxs)(h.DialogFooter,{className:"mt-5 flex justify-end gap-3",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"border-neutral-700 text-white hover:scale-105 transition-all cursor-pointer",onClick:()=>c(!1),disabled:n,children:"Cancelar"}),(0,b.jsx)(i.Button,{className:"bg-gradient-to-r from-[#ef4444] to-[#dc2626] hover:scale-105 text-white flex items-center gap-2 cursor-pointer",onClick:p,disabled:n,children:n?(0,b.jsx)(j.Loader,{className:"animate-spin w-5 h-5"}):"Excluir"})]})]})})}function o({open:a,onOpenChange:c,count:d,selectedRows:e,onAfterDelete:f}){let[n,o]=(0,g.useState)(!1),p=async()=>{if(console.log("ðŸ§© selectedRows recebidos:",e),!e||0===e.length)return void alert("Nenhum item selecionado para exclusÃ£o.");o(!0);try{let a=e.reduce((a,b)=>{let c=(b.Loja||"").toLowerCase().trim(),d="";if(c.includes("pikot")||"pk"===c?d="anuncios_pk":(c.includes("sobaquetas")||c.includes("sÃ³baquetas")||"sb"===c)&&(d="anuncios_sb"),!d)return a;let e=String(b.ID||"").trim();return e&&(a[d]=a[d]||[],a[d].push(e)),a},{});if(0===Object.keys(a).length)return void alert("Erro: Nenhum ID vÃ¡lido para exclusÃ£o.");await Promise.all(Object.entries(a).map(async([a,b])=>{let{error:c}=await m.supabase.from(a).delete().in("ID",b);if(c)throw c})),console.log("âœ… ExclusÃ£o concluÃ­da com sucesso!"),f(),c(!1)}catch(a){console.error("Erro ao excluir:",a),alert("Erro ao excluir anÃºncios: "+(a.message||a))}finally{o(!1)}};return(0,b.jsx)(h.Dialog,{open:a,onOpenChange:a=>!n&&c(a),children:(0,b.jsxs)(h.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl text-white max-w-md shadow-2xl",children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsxs)(h.DialogTitle,{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-red-400"}),"Excluir AnÃºncio(s)"]})}),(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"mt-3 space-y-3",children:[(0,b.jsxs)("p",{className:"text-neutral-300",children:["Deseja realmente excluir"," ",(0,b.jsx)("span",{className:"text-white font-semibold",children:d})," ",1===d?"anÃºncio selecionado":"anÃºncios selecionados","?"]}),(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-sm text-red-300 flex items-start gap-2",children:[(0,b.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{className:"text-red-400",children:"AtenÃ§Ã£o:"})," Esta aÃ§Ã£o Ã© permanente e nÃ£o poderÃ¡ ser desfeita."]})]})]}),(0,b.jsxs)(h.DialogFooter,{className:"mt-5 flex justify-end gap-3",children:[(0,b.jsx)(i.Button,{variant:"outline",className:"border-neutral-700 text-white hover:scale-105 transition-all cursor-pointer",onClick:()=>c(!1),disabled:n,children:"Cancelar"}),(0,b.jsx)(i.Button,{className:"bg-gradient-to-r from-[#ef4444] to-[#dc2626] hover:scale-105 text-white flex items-center gap-2 cursor-pointer",onClick:p,disabled:n,children:n?(0,b.jsx)(j.Loader,{className:"animate-spin w-5 h-5"}):"Excluir"})]})]})})}var p=a.i(84505),q=a.i(26251),r=a.i(17545),s=a.i(15618),t=a.i(70362),u=a.i(70179);let v=async a=>{let b=["ID","Loja","ID Bling","ID Tray","ReferÃªncia","ID Var","OD"],c=["Nome","Marca","Categoria","Peso","Altura","Largura","Comprimento"],d=[];for(let a=1;a<=10;a++)d.push(`C\xf3digo ${a}`,`Quantidade ${a}`);let e=[...b,...c,...d],f=Array(e.length).fill("");f[0]="IDENTIFICAÃ‡ÃƒO",f[b.length]="DESCRIÃ‡ÃƒO",f[b.length+c.length]="COMPOSIÃ‡ÃƒO DE CUSTOS";let g=[f,e],h=t.utils.aoa_to_sheet(g);h["!merges"]=[{s:{r:0,c:0},e:{r:0,c:b.length-1}},{s:{r:0,c:b.length},e:{r:0,c:b.length+c.length-1}},{s:{r:0,c:b.length+c.length},e:{r:0,c:e.length-1}}];let i="1A8CEB",j={fill:{type:"pattern",patternType:"solid",fgColor:{rgb:i}},font:{bold:!0,color:{rgb:"FFFFFF"},sz:13},alignment:{horizontal:"center",vertical:"center"}},k={fill:{type:"pattern",patternType:"solid",fgColor:{rgb:i}},font:{bold:!0,color:{rgb:"FFFFFF"}},alignment:{horizontal:"center",vertical:"center",wrapText:!0}};[0,b.length,b.length+c.length].forEach(a=>{let b=t.utils.encode_cell({r:0,c:a});h[b]&&(h[b].s=j)}),e.forEach((a,b)=>{let c=t.utils.encode_cell({r:1,c:b});h[c]&&(h[c].s=k)}),h["!cols"]=e.map(a=>({wch:["Nome","Categoria","Marca"].includes(a)?22:14}));let l=new Date().toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(/[/:]/g,"-").replace(", ","_"),m=a&&a.trim().length>0?a.endsWith(".xlsx")?a:`${a}.xlsx`:`MODELO - PLANILHA - ${l}.xlsx`,n=t.utils.book_new();t.utils.book_append_sheet(n,h,"Modelo");let o=new Blob([t.write(n,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,u.saveAs)(o,m)};function w({open:a,onOpenChange:c,onImportInclusao:d,onImportAlteracao:e}){let f=g.default.useRef(null),j=g.default.useRef(null),k=(a,b)=>{let c=a.currentTarget.files?.[0];c&&("inclusao"===b?d(c):e(c),a.currentTarget.value="")},m=["ID","Loja","ID Bling","ID Tray","ID Var","OD","ReferÃªncia","Nome","Marca","Categoria","Peso","Altura","Largura","Comprimento","CÃ³digo 1","Quantidade 1","CÃ³digo 2","Quantidade 2","CÃ³digo 3","Quantidade 3","CÃ³digo 4","Quantidade 4","CÃ³digo 5","Quantidade 5","CÃ³digo 6","Quantidade 6","CÃ³digo 7","Quantidade 7","CÃ³digo 8","Quantidade 8","CÃ³digo 9","Quantidade 9","CÃ³digo 10","Quantidade 10"];return(0,b.jsx)(h.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(h.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl text-white max-w-6xl shadow-2xl max-h-[90vh] overflow-hidden",children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsxs)(h.DialogTitle,{className:"text-xl font-semibold flex items-center gap-2 text-white",children:[(0,b.jsx)(r.Layers,{className:"w-5 h-5 text-white"}),"EdiÃ§Ã£o em Massa"]})}),(0,b.jsx)("div",{className:"overflow-y-auto overflow-x-hidden max-h-[75vh] pr-2 custom-scrollbar",children:(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6 pb-6",children:[(0,b.jsx)("input",{ref:f,type:"file",accept:".xlsx, .xls, .csv",className:"hidden",onChange:a=>k(a,"inclusao")}),(0,b.jsx)("input",{ref:j,type:"file",accept:".xlsx, .xls, .csv",className:"hidden",onChange:a=>k(a,"alteracao")}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer",onClick:()=>j.current?.click(),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#2699fe20"},children:(0,b.jsx)(p.Download,{className:"w-6 h-6",style:{color:"#2699fe"}})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-bold mb-1",children:"AlteraÃ§Ã£o em Massa"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Importe planilha para alterar anÃºncios"})]})]})}),(0,b.jsx)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer",onClick:()=>f.current?.click(),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#10b98120"},children:(0,b.jsx)(s.Plus,{className:"w-6 h-6",style:{color:"#10b981"}})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-bold mb-1",children:"InclusÃ£o em Massa"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Importe planilha para incluir novos anÃºncios"})]})]})}),(0,b.jsx)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer",onClick:()=>v(),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#f59e0b20"},children:(0,b.jsx)(q.FileDown,{className:"w-6 h-6",style:{color:"#f59e0b"}})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-bold mb-1",children:"Modelo de Planilha"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Baixe o modelo base para ediÃ§Ã£o"})]})]})})]}),(0,b.jsx)("div",{className:"rounded-xl p-4 bg-white/5 border border-neutral-700",children:(0,b.jsxs)("p",{className:"text-neutral-300 text-sm leading-relaxed",children:["VocÃª pode importar arquivos em formato"," ",(0,b.jsx)("strong",{className:"text-white",children:".xlsx"})," ou"," ",(0,b.jsx)("strong",{className:"text-white",children:".csv"})," com as colunas do modelo. ApÃ³s o upload, o sistema mostrarÃ¡ uma prÃ©-visualizaÃ§Ã£o antes de confirmar a importaÃ§Ã£o."]})}),(0,b.jsx)("div",{className:"border border-neutral-700 rounded-xl overflow-auto max-h-[350px] scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent",children:(0,b.jsxs)("table",{className:"w-full text-sm text-neutral-300 border-collapse min-w-[1000px]",children:[(0,b.jsx)("thead",{className:"bg-neutral-800/80 text-white sticky top-0",children:(0,b.jsx)("tr",{children:m.map(a=>(0,b.jsx)("th",{className:"p-2 border-b border-neutral-700 text-left font-semibold whitespace-nowrap",children:a},a))})}),(0,b.jsx)("tbody",{children:[{ID:"1",Loja:"Pikot Shop","ID Bling":"1234567891011","ID Tray":"1234567","ID Var":"1234",OD:"3",ReferÃªncia:"Q12 MK2",Nome:"Caixa Ativa 12 Polegadas Q12 MK2 SKP",Marca:"SKP",Categoria:"Ãudio & Som",Peso:"12300",Altura:"55",Largura:"35",Comprimento:"30","CÃ³digo 1":"Q12 MK2","Quantidade 1":"1"},{ID:"2",Loja:"SÃ³baquetas","ID Bling":"1234567891011","ID Tray":"1234567","ID Var":"1234",OD:"1",ReferÃªncia:"PAI - TN 5AM",Nome:"Baqueta Liverpool Tennessee Marfim Ponta de Madeira",Marca:"Liverpool",Categoria:"Baquetas",Peso:"300",Altura:"13",Largura:"7",Comprimento:"47","CÃ³digo 1":"TN 5AM","Quantidade 1":"1"}].map((a,c)=>(0,b.jsx)("tr",{className:`${c%2==0?"bg-neutral-900/40":"bg-neutral-800/40"} hover:bg-white/10 transition-colors`,children:m.map(c=>(0,b.jsx)("td",{className:"p-2 border-b border-neutral-800 whitespace-nowrap",children:a[c]??""},c))},c))})]})}),(0,b.jsx)("p",{className:"text-sm text-neutral-400 italic",children:"Mantenha os cabeÃ§alhos exatamente como no modelo (.xlsx ou .csv) para evitar erros."})]})}),(0,b.jsx)(h.DialogFooter,{className:"mt-6 flex justify-end border-t border-neutral-800 pt-4",children:(0,b.jsx)(i.Button,{variant:"outline",className:"border-neutral-700 text-white hover:bg-white/10 transition-all rounded-xl",onClick:()=>c(!1),children:"Fechar"})})]})})}let x={ID:"ID",Nome:"Nome",Marca:"Marca",Categoria:"Categoria",Loja:"Loja","ID Bling":"ID Bling","ID Tray":"ID Tray",ReferÃªncia:"ReferÃªncia"};var y=a.i(75750);async function z(a,b=!1){let c=[],d=await a.arrayBuffer(),e=y.read(d,{type:"array"}),f=e.Sheets[e.SheetNames[0]];if(!f)return c.push("NÃ£o foi possÃ­vel ler a planilha. Verifique o formato do arquivo."),{data:[],warnings:c};let g=y.utils.decode_range(f["!ref"]);g.s.r=1,f["!ref"]=y.utils.encode_range(g);let h=y.utils.sheet_to_json(f,{defval:""});if(0===h.length)return c.push("Nenhum dado encontrado apÃ³s o cabeÃ§alho."),{data:[],warnings:c};let i=h.map(a=>{let b=b=>{let c=Object.keys(a).find(a=>b.some(b=>a.trim().toLowerCase()===b.trim().toLowerCase()));return c?a[c]:""},c={ID:b(["ID","ID Geral","ID (Supabase)"]),Loja:b(["Loja","loja"]),"ID Bling":b(["ID Bling","bling"]),"ID Tray":b(["ID Tray","tray"]),ReferÃªncia:b(["ReferÃªncia","referencia"]),"ID Var":b(["ID Var","id var"]),OD:b(["OD","od"]),Nome:b(["Nome","name"]),Marca:b(["Marca","brand"]),Categoria:b(["Categoria","category"]),Peso:b(["Peso","weight"]),Altura:b(["Altura","height"]),Largura:b(["Largura","width"]),Comprimento:b(["Comprimento","length"])};for(let a=1;a<=10;a++)c[`C\xf3digo ${a}`]=b([`C\xf3digo ${a}`,`codigo ${a}`,`cod ${a}`]),c[`Quantidade ${a}`]=b([`Quantidade ${a}`,`quantidade ${a}`,`quant ${a}`,`qtd ${a}`]);return c});if(b)return{data:i,warnings:c};let j=i.filter(a=>(a.Loja||"").toLowerCase().includes("pikot")||(a.Loja||"").toLowerCase().includes("pikot shop")),k=i.filter(a=>(a.Loja||"").toLowerCase().includes("sobaquetas")),l=i.filter(a=>!j.includes(a)&&!k.includes(a));async function n(a,b){if(0===b.length)return b;let{data:c}=await m.supabase.from(a).select("ID").order("ID",{ascending:!1}).limit(1).maybeSingle(),d=c?.ID?parseInt(c.ID)+1:1;return b.map(a=>((!a.ID||""===a.ID||null===a.ID)&&(a.ID=d,d++),a))}let o=[];if(j.length>0){let a=await n("anuncios_pk",j);o.push(m.supabase.from("anuncios_pk").upsert(a).then(({error:a})=>{if(a)throw Error(`Erro ao importar Pikot Shop: ${a.message}`)}))}if(k.length>0){let a=await n("anuncios_sb",k);o.push(m.supabase.from("anuncios_sb").upsert(a).then(({error:a})=>{if(a)throw Error(`Erro ao importar S\xf3baquetas: ${a.message}`)}))}return l.length>0&&c.push(`${l.length} registro(s) ignorado(s): sem loja identificada (Pikot Shop ou S\xf3baquetas).`),await Promise.all(o),{data:i,warnings:c}}async function A(a,b){if(!a||0===a.length)return void alert("Nenhum dado encontrado para exportar.");let c=new Date().toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).replace(/[/:]/g,"-").replace(", ","_"),d=b&&b.trim().length>0?b.endsWith(".xlsx")?b:`${b}.xlsx`:`AN\xdaNCIOS - RELAT\xd3RIO - ${c}.xlsx`,e=["ID","Loja","ID Bling","ID Tray","ReferÃªncia","ID Var","OD"],f=["Nome","Marca","Categoria","Peso","Altura","Largura","Comprimento"],g=[];for(let a=1;a<=10;a++)g.push(`C\xf3digo ${a}`,`Quantidade ${a}`);let h=[...e,...f,...g],i=[];for(let b=0;b<a.length;b+=1e3){let c=a.slice(b,b+1e3).map(a=>{let b={};return h.forEach(c=>{let d=Object.keys(a).find(a=>a.trim().toLowerCase()===c.trim().toLowerCase());b[c]=d?a[d]??"":""}),h.map(a=>b[a])});i.push(...c),await new Promise(a=>setTimeout(a,10))}let j="1A8CEB",k={fill:{type:"pattern",patternType:"solid",fgColor:{rgb:j}},font:{bold:!0,color:{rgb:"FFFFFF"}},alignment:{horizontal:"center",vertical:"center",wrapText:!0}},l={fill:{type:"pattern",patternType:"solid",fgColor:{rgb:j}},font:{bold:!0,color:{rgb:"FFFFFF"},sz:13},alignment:{horizontal:"center",vertical:"center"}},m=Array(h.length).fill("");m[0]="IDENTIFICAÃ‡ÃƒO",m[e.length]="DESCRIÃ‡ÃƒO",m[e.length+f.length]="COMPOSIÃ‡ÃƒO DE CUSTOS";let n=[m,h,...i],o=t.utils.aoa_to_sheet(n);o["!merges"]=[{s:{r:0,c:0},e:{r:0,c:e.length-1}},{s:{r:0,c:e.length},e:{r:0,c:e.length+f.length-1}},{s:{r:0,c:e.length+f.length},e:{r:0,c:h.length-1}}],await new Promise(a=>{setTimeout(()=>{[0,e.length,e.length+f.length].forEach(a=>{let b=t.utils.encode_cell({r:0,c:a});o[b]&&(o[b].s=l)}),h.forEach((a,b)=>{let c=t.utils.encode_cell({r:1,c:b});o[c]&&(o[c].s=k)}),o["!cols"]=h.map(()=>({wch:15})),a(null)},30)});let p=await new Promise(a=>{setTimeout(()=>{let b=t.utils.book_new();t.utils.book_append_sheet(b,o,"AnÃºncios"),a(new Blob([t.write(b,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"}))},50)});(0,u.saveAs)(p,d)}var B=a.i(66718),C=a.i(87532),D=a.i(73320),E=a.i(81560),F=a.i(99209),G=a.i(15055),H=a.i(70430),I=a.i(69012),J=a.i(62036);function K({allLojas:a,allBrands:c,allCategorias:d,selectedLoja:e,setSelectedLoja:f,selectedBrands:g,setSelectedBrands:h,selectedCategoria:j,setSelectedCategoria:k,open:m,onOpenChange:n}){let o=e??[],p=g??[],q=j??[],r=(a,b,c,d)=>{b(!0===d?[...new Set([...a??[],c])]:(a??[]).filter(a=>a!==c))},s=()=>{f([]),h([]),k([])},t=a=>`flex items-center gap-2 text-gray-200 text-sm px-2 py-[4px] rounded-md cursor-pointer select-none transition ${a?"bg-white/10 border border-green-500/40":"hover:bg-white/5"}`;return(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(F.Popover,{open:m,onOpenChange:n,children:[(0,b.jsx)(F.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{variant:"outline",className:"cursor-pointer border-neutral-700 hover:scale-105 transition-all text-white rounded-xl",children:[(0,b.jsx)(I.Filter,{className:"w-4 h-4 mr-2"})," Filtros"]})}),(0,b.jsxs)(F.PopoverContent,{className:"relative w-[380px] border border-neutral-700 rounded-2xl p-4 bg-white/10 backdrop-blur-md shadow-xl space-y-4",side:"bottom",align:"start",children:[(0,b.jsx)("button",{className:"absolute right-4 top-4 text-green-500 hover:text-transparent bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-lg font-bold cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_6px_#22c55e]",title:"Fechar",onClick:()=>n(!1),children:"âœ•"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"text-white text-sm mb-1 block",children:"Loja"}),(0,b.jsx)("div",{className:"max-h-28 overflow-auto pr-1 space-y-1 pl-1",children:a.map(a=>{let c=o.includes(a);return(0,b.jsxs)("div",{className:t(c),onClick:()=>r(o,f,a,!c),children:[(0,b.jsx)(G.Checkbox,{checked:c,onCheckedChange:b=>r(o,f,a,b),className:"border-neutral-600 cursor-pointer data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-green-500 data-[state=checked]:to-green-600"}),(0,b.jsx)("span",{children:a})]},a)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"text-white text-sm mb-1 block",children:"Marca"}),(0,b.jsx)("div",{className:"max-h-28 overflow-auto pr-1 space-y-1 pl-1",children:c.map(a=>{let c=p.includes(a);return(0,b.jsxs)("div",{className:t(c),onClick:()=>r(p,h,a,!c),children:[(0,b.jsx)(G.Checkbox,{checked:c,onCheckedChange:b=>r(p,h,a,b),className:"border-neutral-600 cursor-pointer data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-green-500 data-[state=checked]:to-green-600"}),(0,b.jsx)("span",{className:"truncate",title:a,children:a})]},a)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"text-white text-sm mb-1 block",children:"Categoria"}),(0,b.jsx)("div",{className:"max-h-28 overflow-auto pr-1 space-y-1 pl-1",children:d.map(a=>{let c=q.includes(a);return(0,b.jsxs)("div",{className:t(c),onClick:()=>r(q,k,a,!c),children:[(0,b.jsx)(G.Checkbox,{checked:c,onCheckedChange:b=>r(q,k,a,b),className:"border-neutral-600 cursor-pointer data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-green-500 data-[state=checked]:to-green-600"}),(0,b.jsx)("span",{children:a})]},a)})})]}),(0,b.jsxs)("div",{className:"flex justify-between gap-2 pt-2",children:[(0,b.jsx)(i.Button,{variant:"ghost",className:"text-gray-300 hover:text-white hover:scale-105 cursor-pointer",onClick:s,children:"Limpar"}),(0,b.jsx)(i.Button,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white hover:scale-105 cursor-pointer rounded-xl",onClick:()=>n(!1),children:"Aplicar"})]})]})]}),(0,b.jsx)(J.AnimatePresence,{children:(o.length>0||p.length>0||q.length>0)&&(0,b.jsxs)(l.motion.div,{className:"flex flex-wrap items-center gap-2 ml-2",initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.25},children:[[...o,...p,...q].map(a=>(0,b.jsxs)(l.motion.div,{className:"flex items-center gap-1 bg-white/10 border border-green-500/50 text-white px-2 py-[3px] rounded-md text-xs cursor-pointer hover:bg-green-600/20 transition",onClick:()=>{f(o.filter(b=>b!==a)),h(p.filter(b=>b!==a)),k(q.filter(b=>b!==a))},title:`Remover filtro: ${a}`,children:[(0,b.jsx)("span",{className:"truncate max-w-[100px]",children:a}),(0,b.jsx)("span",{className:"text-[11px] font-bold ml-1 bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent",children:"âœ•"})]},a)),(0,b.jsx)(i.Button,{variant:"ghost",className:"text-gray-300 hover:text-white text-xs px-2 py-[3px] rounded-lg cursor-pointer hover:scale-105",onClick:s,children:"Limpar tudo"})]})})]})}function L(a){let[c,d]=g.default.useState(!1),[e,f]=g.default.useState(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center border-b border-neutral-700 p-4 gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(C.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400 w-5 h-5"}),(0,b.jsx)(B.Input,{placeholder:"Buscar por nome, marca, ID Bling, ID Tray, referÃªncia...",value:a.search,onChange:b=>a.setSearch(b.target.value),className:"pl-10 bg-white/5 border-neutral-700 text-white rounded-xl focus-visible:ring-0 focus-visible:border-green-500"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)(K,{allBrands:a.allBrands,allLojas:a.allLojas,allCategorias:a.allCategorias,selectedBrands:a.selectedBrands,setSelectedBrands:a.setSelectedBrands,selectedLoja:a.selectedLoja,setSelectedLoja:a.setSelectedLoja,selectedCategoria:a.selectedCategoria,setSelectedCategoria:a.setSelectedCategoria,open:a.filterOpen,onOpenChange:a.setFilterOpen}),(0,b.jsx)("input",{ref:a.fileInputRef,type:"file",accept:".csv, .xlsx",className:"hidden",onChange:b=>a.onFileSelect(b)}),(0,b.jsxs)(i.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:()=>a.fileInputRef.current?.click(),children:[(0,b.jsx)(D.Upload,{className:"w-4 h-4 mr-2"})," Importar"]}),(0,b.jsxs)(i.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:a.onExport,children:[(0,b.jsx)(p.Download,{className:"w-4 h-4 mr-2"})," Exportar"]}),a.selectedCount>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:()=>d(!0),children:[(0,b.jsx)(E.Trash2,{className:"w-4 h-4 mr-2"})," Excluir Selecionados"]}),(0,b.jsx)(i.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:a.onClearSelection,children:"Desmarcar Todos"})]}),(0,b.jsxs)(i.Button,{className:"bg-gradient-to-r from-[#1A8CEB] to-[#0d64ab] hover:scale-105 transition-all rounded-xl text-white cursor-pointer",onClick:a.onMassEditOpen,children:[(0,b.jsx)(r.Layers,{className:"w-4 h-4 mr-2"})," EdiÃ§Ã£o em Massa"]}),(0,b.jsx)(i.Button,{className:"bg-gradient-to-r from-green-500 to-green-600 hover:scale-105 transition-all rounded-xl text-white cursor-pointer",onClick:a.onNew,children:"+ Novo Cadastro"})]})]}),(0,b.jsx)(n,{open:c,onOpenChange:d,count:a.selectedCount,selectedRows:a.selectedRows.map(a=>({ID:String(a.id??a.ID??""),Loja:String(a.loja??a.Loja??"")})),onAfterDelete:async()=>{await a.onDeleteSelected()}})]})}var M=a.i(95490),N=a.i(85668),O=a.i(9941);function P({sortColumn:a,sortDirection:c,onSort:d,allVisibleSelected:f,toggleSelectAllVisible:g}){return(0,b.jsxs)(e.TableRow,{className:"border-neutral-700",children:[(0,b.jsx)(e.TableHead,{className:"w-[40px] text-center",children:(0,b.jsx)("input",{type:"checkbox",checked:f,onChange:a=>g(a.target.checked),className:"w-4 h-4 cursor-pointer accent-[#1A8CEB] [accent-color:#1A8CEB]",style:{accentColor:"#1A8CEB"}})}),["ID","Loja","ID Bling","ID Tray","ReferÃªncia","Nome","Marca","AÃ§Ãµes"].map(f=>{let g="AÃ§Ãµes"!==f,h=a===f&&"ID"!==f,i=h?"text-white":"text-neutral-500";return(0,b.jsx)(e.TableHead,{onClick:()=>g?d(f):null,className:`font-semibold select-none transition-colors text-center ${g?h?"text-white cursor-pointer":"text-neutral-400 cursor-pointer hover:text-white":"text-neutral-400"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[f,g&&(h?"asc"===c?(0,b.jsx)(M.ArrowUp,{className:`h-3 w-3 ${i}`}):(0,b.jsx)(N.ArrowDown,{className:`h-3 w-3 ${i}`}):(0,b.jsx)(O.ArrowUpDown,{className:`h-3 w-3 ${i}`}))]})},f)})]})}var Q=a.i(35570),R=a.i(24569);function S({rows:a,loading:c,selectedRows:d,toggleRow:f,onEdit:h,onDelete:k}){let[l,m]=(0,g.useState)(null),n=(a,b)=>{a&&(navigator.clipboard.writeText(a),m(b),setTimeout(()=>m(null),1500))};return c?(0,b.jsx)(e.TableRow,{children:(0,b.jsx)(e.TableCell,{colSpan:9,children:(0,b.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,b.jsx)(j.Loader,{className:"animate-spin h-8 w-8 text-neutral-400"})})})}):0===a.length?(0,b.jsx)(e.TableRow,{children:(0,b.jsx)(e.TableCell,{colSpan:9,children:(0,b.jsx)("div",{className:"py-10 text-center text-neutral-400",children:"Nenhum registro encontrado"})})}):(0,b.jsx)(b.Fragment,{children:a.map(a=>{let c=d.some(b=>`${b.loja}-${b.id}`==`${a.loja}-${a.id}`);return(0,b.jsxs)(e.TableRow,{className:`border-b border-neutral-700 transition-colors ${c?"bg-white/10 hover:bg-white/20":"hover:bg-white/5"}`,children:[(0,b.jsx)(e.TableCell,{className:"text-center",children:(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>f(a),className:"w-4 h-4 cursor-pointer accent-[#1A8CEB] [accent-color:#1A8CEB]",style:{accentColor:"#1A8CEB"}})}),(0,b.jsx)(e.TableCell,{className:"text-white text-center",children:a.id}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:a.loja}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:[a.id_bling||"-",a.id_bling&&(0,b.jsx)("button",{onClick:()=>n(a.id_bling||"",`bling-${a.id}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(Q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${l===`bling-${a.id}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:[a.id_tray||"-",a.id_tray&&(0,b.jsx)("button",{onClick:()=>n(a.id_tray||"",`tray-${a.id}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(Q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${l===`tray-${a.id}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:[a.referencia||"-",a.referencia&&(0,b.jsx)("button",{onClick:()=>n(a.referencia||"",`ref-${a.id}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(Q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${l===`ref-${a.id}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:a.nome}),(0,b.jsx)(e.TableCell,{className:"text-neutral-300 text-center",children:a.marca}),(0,b.jsxs)(e.TableCell,{className:"flex justify-center gap-2",children:[(0,b.jsx)(i.Button,{size:"sm",variant:"ghost",className:"text-white hover:text-[#1a8ceb] hover:scale-105 transition-all cursor-pointer",onClick:()=>h(String(a.id),a.loja),children:(0,b.jsx)(R.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(i.Button,{size:"sm",variant:"ghost",className:"text-white hover:text-[#ef4444] hover:scale-105 transition-all cursor-pointer",onClick:()=>k(a),children:(0,b.jsx)(E.Trash2,{className:"h-4 w-4"})})]})]},`${a.id}-${a.loja}-${a.id_tray}`)})})}function T(){let a=(0,c.useRouter)(),h=function(){let[a,b]=(0,g.useState)([]),[c,d]=(0,g.useState)(!1),[e,f]=(0,g.useState)(1),[h,i]=(0,g.useState)(50),[j,k]=(0,g.useState)(0),[l,n]=(0,g.useState)(""),[o,p]=(0,g.useState)(l),[q,r]=(0,g.useState)([]),[s]=(0,g.useState)(["Pikot Shop","SÃ³baquetas"]),[t,u]=(0,g.useState)([]),[v,w]=(0,g.useState)([]),[y,z]=(0,g.useState)([]),[A,B]=(0,g.useState)([]),[C,D]=(0,g.useState)(!1),[E,F]=(0,g.useState)("ID"),[G,H]=(0,g.useState)("asc"),[I,J]=(0,g.useState)([]),[K,L]=(0,g.useState)(!1),[M,N]=(0,g.useState)(!1),O=async a=>{let{data:b}=await m.supabase.from("anuncios_all").select(`${a}`,{distinct:!0}).not(a,"is",null).neq(a,"").order(a,{ascending:!0}).limit(2e4);return[...new Set((b||[]).map(b=>String(b[a]??"")))]},P=async()=>{let[a,b]=await Promise.all([O("Marca"),O("Categoria")]);r(a.sort()),u(b.sort())},Q=async(a=1)=>{d(!0);try{var c;let d,e=(a-1)*h,f=m.supabase.from("anuncios_all").select("*",{count:"exact"}).range(e,e+h-1);if(o.trim()&&(f=f.or((c=o.trim(),d=`%${c}%`,/^[0-9]+$/.test(c)?`"ID Bling".eq.${c},"ID Tray".eq.${c},"Refer\xeancia".eq.${c}`:`"Nome".ilike.${d},"Marca".ilike.${d},"Categoria".ilike.${d},"Refer\xeancia".ilike.${d},"ID Bling".ilike.${d},"ID Tray".ilike.${d}`))),v.length&&(f=f.in("Marca",v)),A.length&&(f=f.in("Categoria",A)),y.length){let a=y.map(a=>"Pikot Shop"===a?"PK":"SÃ³baquetas"===a?"SB":a);f=f.in("Loja",a)}let g=E&&x[E]?x[E]:"ID";f=f.order(g,{ascending:"asc"===G,nullsFirst:!1}),"ID"!==g&&(f=f.order("ID",{ascending:!0}));let{data:i,count:j,error:l}=await f;if(l)throw l;let n=(i||[]).map(a=>{let b={id:a.ID,loja:a.Loja||"SÃ³baquetas",id_bling:a["ID Bling"],id_tray:a["ID Tray"],id_var:a["ID Var"],od:a.OD,referencia:a["ReferÃªncia"],nome:a.Nome,marca:a.Marca,categoria:a.Categoria,peso:a.Peso,altura:a.Altura,largura:a.Largura,comprimento:a.Comprimento,codigo_1:a["CÃ³digo 1"],quantidade_1:a["Quantidade 1"],codigo_2:a["CÃ³digo 2"],quantidade_2:a["Quantidade 2"],codigo_3:a["CÃ³digo 3"],quantidade_3:a["Quantidade 3"],codigo_4:a["CÃ³digo 4"],quantidade_4:a["Quantidade 4"],codigo_5:a["CÃ³digo 5"],quantidade_5:a["Quantidade 5"],codigo_6:a["CÃ³digo 6"],quantidade_6:a["Quantidade 6"],codigo_7:a["CÃ³digo 7"],quantidade_7:a["Quantidade 7"],codigo_8:a["CÃ³digo 8"],quantidade_8:a["Quantidade 8"],codigo_9:a["CÃ³digo 9"],quantidade_9:a["Quantidade 9"],codigo_10:a["CÃ³digo 10"],quantidade_10:a["Quantidade 10"]};return b.loja="PK"===a.Loja?"Pikot Shop":"SB"===a.Loja?"SÃ³baquetas":a.Loja||"Desconhecida",b.id=a.ID,b});b(n),k(j||0)}catch(a){console.error("Erro ao carregar anÃºncios:",a),b([]),k(0)}finally{d(!1)}},R=(0,g.useCallback)(async()=>{if(!I||0===I.length)return void alert("Nenhum item selecionado para exclusÃ£o.");N(!0);try{let a=I.reduce((a,b)=>{let c=(b.loja||b.Loja||"").toString().toLowerCase(),d="";if(c.includes("pikot")||"pk"===c?d="anuncios_pk":(c.includes("sobaquetas")||c.includes("sÃ³baquetas")||"sb"===c)&&(d="anuncios_sb"),!d)return a;let e=String(b.id??b.ID??"").trim();return e&&(a[d]=a[d]||[],a[d].push(e)),a},{});if(0===Object.keys(a).length){alert("Nenhum item vÃ¡lido para exclusÃ£o (sem ID ou loja)."),N(!1);return}let b=Object.entries(a).map(async([a,b])=>{let{error:c}=await m.supabase.from(a).delete().in("ID",b);if(c)throw c});await Promise.all(b),await Q(e),J([]),L(!1)}catch(a){alert("Erro ao excluir anÃºncios: "+(a.message||a))}finally{N(!1)}},[I,e]);(0,g.useEffect)(()=>{let a=setTimeout(()=>p(l),400);return()=>clearTimeout(a)},[l]),(0,g.useEffect)(()=>{P()},[]),(0,g.useEffect)(()=>{Q(e)},[e,h,o,v,y,A,E,G]);let S=a.length>0&&a.every(a=>I.some(b=>(b.id??b.ID)===(a.id??a.ID)&&(b.loja??b.Loja)===(a.loja??a.Loja)));return{rows:a,loading:c,totalItems:j,allBrands:q,allLojas:s,allCategorias:t,selectedBrands:v,selectedLoja:y,selectedCategoria:A,currentPage:e,itemsPerPage:h,setCurrentPage:f,setItemsPerPage:i,search:l,setSearch:n,setSelectedBrands:w,setSelectedLoja:z,setSelectedCategoria:B,filterOpen:C,setFilterOpen:D,sortColumn:E,sortDirection:G,handleSort:a=>{a in x&&(E===a?H(a=>"asc"===a?"desc":"asc"):(F(a),H("asc")),f(1))},selectedRows:I,setSelectedRows:J,toggleRow:a=>{J(b=>b.some(b=>(b.id??b.ID)===(a.id??a.ID)&&(b.loja??b.Loja)===(a.loja??a.Loja))?b.filter(b=>(b.id??b.ID)!==(a.id??a.ID)||(b.loja??b.Loja)!==(a.loja??a.Loja)):[...b,a])},allVisibleSelected:S,toggleSelectAllVisible:b=>{if(b){let b=a.filter(a=>!I.some(b=>(b.id??b.ID)===(a.id??a.ID)&&(b.loja??b.Loja)===(a.loja??a.Loja)));J(a=>[...a,...b])}else J(I.filter(b=>!a.some(a=>(a.id??a.ID)===(b.id??b.ID)&&(a.loja??a.Loja)===(b.loja??b.Loja))))},openDelete:K,setOpenDelete:L,deleting:M,setDeleting:N,deleteSelected:R,loadAnuncios:Q}}(),i=h.selectedLoja??[],j=h.selectedBrands??[],k=h.selectedCategoria??[],l=function(a,b,c,d=[]){let e=(0,g.useRef)(null),[f,h]=(0,g.useState)(!1),[i,j]=(0,g.useState)(!1),[k,l]=(0,g.useState)(null),[n,o]=(0,g.useState)(0),[p,q]=(0,g.useState)([]),[r,s]=(0,g.useState)([]),[t,u]=(0,g.useState)(!1),v=(a=!1)=>{let b=c?.selectedStores?.includes("Pikot")?"anuncios_pk":c?.selectedStores?.includes("Sobaquetas")?"anuncios_sb":"anuncios_all",d=m.supabase.from(b).select("*",{count:"exact",head:a});return c?.search?.trim()&&(d=d.or(`Nome.ilike.%${c.search}%,Marca.ilike.%${c.search}%,Refer\xeancia.ilike.%${c.search}%`)),c?.selectedStores?.length&&(d=d.in("Loja",c.selectedStores)),d},w=async()=>{let{count:a}=await v(!0),b=Math.ceil((a||0)/1e3),c=[];for(let a=1;a<=b;a++){let b=(a-1)*1e3,d=b+1e3-1,{data:e}=await v(!1).range(b,d);c=c.concat(e||[])}return c};return{fileInputRef:e,handleFileSelect:async a=>{let b=a.target?.files,c=b?.[0];if(c)try{let{data:a,warnings:b}=await z(c,!0);l(c),o(a.length),q(a.slice(0,10)),s(b||[]),j(!0)}catch(a){console.error("Erro ao importar arquivo:",a),alert("Erro ao ler o arquivo. Verifique se o formato estÃ¡ correto (.xlsx ou .csv).")}finally{a.target.value=""}},handleFileDirect:async a=>{if(a)try{let{data:b,warnings:c}=await z(a,!0);l(a),o(b.length),q(b.slice(0,10)),s(c||[]),j(!0)}catch(a){console.error("Erro ao importar arquivo direto:",a),alert("Erro ao ler o arquivo. Verifique se o formato estÃ¡ correto (.xlsx ou .csv).")}},confirmImport:async()=>{if(k){u(!0);try{console.log("ðŸ“¦ Importando para Supabase:",k.name),await z(k),a(b)}catch(a){console.error("Erro ao importar:",a),alert("Erro ao importar dados. Verifique o console para mais detalhes.")}finally{u(!1),j(!1)}}},handleExport:async()=>{let a=d.length>0?d:await w();if(!a.length)return void alert("Nenhum dado encontrado para exportar.");let b=new Date;A(a,`AN\xdaNCIOS - RELAT\xd3RIO - ${b.toLocaleString("pt-BR").replace(/[/: ]/g,"-")}.xlsx`)},importCount:n,previewRows:p,warnings:r,importing:t,openMassEdition:f,setOpenMassEdition:h,openConfirmImport:i,setOpenConfirmImport:j}}(h.loadAnuncios,h.currentPage,{search:h.search,selectedStores:i},h.selectedRows),p=Math.max(1,Math.ceil(h.totalItems/h.itemsPerPage));return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#0a0a0a] via-[#0f0f0f] to-[#0a0a0a] p-8",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)(d.GlassmorphicCard,{children:[(0,b.jsx)(L,{search:h.search,setSearch:h.setSearch,allBrands:h.allBrands,allLojas:h.allLojas,allCategorias:h.allCategorias,selectedBrands:j,selectedLoja:i,selectedCategoria:k,setSelectedBrands:h.setSelectedBrands,setSelectedLoja:h.setSelectedLoja,setSelectedCategoria:h.setSelectedCategoria,filterOpen:h.filterOpen,setFilterOpen:h.setFilterOpen,fileInputRef:l.fileInputRef,onFileSelect:l.handleFileSelect,onExport:()=>l.handleExport(),selectedCount:h.selectedRows.length,selectedRows:h.selectedRows,onDeleteSelected:h.deleteSelected,onClearSelection:()=>h.setSelectedRows([]),onMassEditOpen:()=>l.setOpenMassEdition(!0),onNew:()=>a.push("/dashboard/anuncios/edit")}),(0,b.jsxs)(e.Table,{children:[(0,b.jsx)(e.TableHeader,{children:(0,b.jsx)(P,{sortColumn:h.sortColumn,sortDirection:h.sortDirection,onSort:h.handleSort,allVisibleSelected:h.allVisibleSelected,toggleSelectAllVisible:h.toggleSelectAllVisible})}),(0,b.jsx)(e.TableBody,{children:(0,b.jsx)(S,{rows:h.rows,loading:h.loading,selectedRows:h.selectedRows,toggleRow:h.toggleRow,onEdit:(b,c)=>a.push(`/dashboard/anuncios/edit?id=${b}&loja=${encodeURIComponent("PK"===c?"Pikot Shop":"SB"===c?"SÃ³baquetas":c)}`),onDelete:async a=>{h.setSelectedRows([a]),await h.deleteSelected()}})})]})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(f.TableControls,{currentPage:h.currentPage,totalPages:p,itemsPerPage:h.itemsPerPage,totalItems:h.totalItems,onPageChange:a=>h.setCurrentPage(Math.max(1,Math.min(p,a))),onItemsPerPageChange:a=>{h.setItemsPerPage(a),h.setCurrentPage(1)},selectedCount:h.selectedRows.length})})]}),(0,b.jsx)(n,{open:h.openDelete,onOpenChange:h.setOpenDelete,count:h.selectedRows.length,selectedRows:h.selectedRows.map(a=>({ID:String(a.id??a.ID??""),Loja:String(a.loja??a.Loja??"")})),onAfterDelete:async()=>{await h.loadAnuncios(h.currentPage),h.setSelectedRows([])}}),(0,b.jsx)(w,{open:l.openMassEdition,onOpenChange:l.setOpenMassEdition,onImportInclusao:l.handleFileDirect,onImportAlteracao:l.handleFileDirect}),(0,b.jsx)(o,{open:l.openConfirmImport,onOpenChange:l.setOpenConfirmImport,count:l.importCount,previewRows:l.previewRows,warnings:l.warnings,onConfirm:l.confirmImport,importing:l.importing})]})}var U=a.i(63771);function V(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(U.LoadingBar,{}),(0,b.jsx)(T,{})]})}a.s(["default",()=>V],35643)}];

//# sourceMappingURL=src_app_dashboard_anuncios_page_tsx_37fbb31c._.js.map