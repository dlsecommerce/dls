module.exports=[23518,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(74167),e=a.i(91557),f=a.i(66718),g=a.i(94202),h=a.i(6015),i=a.i(9941),j=a.i(84505),k=a.i(24569),l=a.i(28193),m=a.i(17545),n=a.i(87532),o=a.i(81560),p=a.i(73320),q=a.i(35570),r=a.i(80701),s=a.i(86304),t=a.i(13749),u=a.i(50522),v=a.i(18341),w=a.i(31746);function x({currentPage:a,totalPages:c,itemsPerPage:d,totalItems:e,onPageChange:f,onItemsPerPageChange:h,selectedCount:i=0}){let j=(a-1)*d+1,k=Math.min(a*d,e);return(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 px-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("p",{className:"text-sm text-neutral-400",children:["Mostrando"," ",(0,b.jsx)("span",{className:"font-medium text-white",children:j})," a"," ",(0,b.jsx)("span",{className:"font-medium text-white",children:k})," de"," ",(0,b.jsx)("span",{className:"font-medium text-white",children:e})," produtos"]}),i>0&&(0,b.jsxs)(s.Badge,{variant:"default",className:"ml-2 bg-[#1e1e1e] border border-[#1A8CEB] text-white",children:[i," selecionado",i>1?"s":""]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Linhas por página:"}),(0,b.jsxs)(r.Select,{value:d.toString(),onValueChange:a=>h(Number(a)),children:[(0,b.jsx)(r.SelectTrigger,{className:"w-[70px] h-8 bg-[#0f0f0f]/90 border border-neutral-700 text-white rounded-lg focus:ring-1 focus:ring-neutral-600 transition-all",children:(0,b.jsx)(r.SelectValue,{})}),(0,b.jsx)(r.SelectContent,{className:"bg-[#111111] border border-neutral-700 text-white rounded-xl shadow-lg",children:[10,20,50].map(a=>(0,b.jsx)(r.SelectItem,{value:a.toString(),className:"hover:bg-white/10 hover:text-white cursor-pointer transition-colors",children:a},a))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>f(1),disabled:1===a,className:"h-8 w-8 p-0 border-neutral-700 text-white hover:bg-white/10 transition-all",children:(0,b.jsx)(v.ChevronsLeft,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>f(a-1),disabled:1===a,className:"h-8 w-8 p-0 border-neutral-700 text-white hover:bg-white/10 transition-all",children:(0,b.jsx)(t.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mx-2",children:[(0,b.jsx)("input",{type:"number",min:1,max:c,value:a,onChange:a=>{let b=Number(a.target.value);b>=1&&b<=c&&f(b)},className:"w-12 h-8 text-center text-sm bg-[#0f0f0f]/80 border border-neutral-700 rounded-lg px-1 text-white focus:ring-1 focus:ring-neutral-600 focus:outline-none"}),(0,b.jsxs)("span",{className:"text-sm text-neutral-400",children:["de ",c]})]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>f(a+1),disabled:a===c,className:"h-8 w-8 p-0 border-neutral-700 text-white hover:bg-white/10 transition-all",children:(0,b.jsx)(u.ChevronRight,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>f(c),disabled:a===c,className:"h-8 w-8 p-0 border-neutral-700 text-white hover:bg-white/10 transition-all",children:(0,b.jsx)(w.ChevronsRight,{className:"h-4 w-4"})})]})]})]})}var y=a.i(99209),z=a.i(15055),A=a.i(70430),B=a.i(69012),C=a.i(46271),D=a.i(62036);function E({allBrands:a,selectedBrands:c,setSelectedBrands:d,open:e,onOpenChange:f}){return(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)(y.Popover,{open:e,onOpenChange:f,children:[(0,b.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"cursor-pointer border-neutral-700 hover:scale-105 transition-all text-white rounded-xl",children:[(0,b.jsx)(B.Filter,{className:"w-4 h-4 mr-2"})," Filtros"]})}),(0,b.jsxs)(y.PopoverContent,{className:"relative w-80 border border-neutral-700 rounded-2xl p-4 bg-white/10 backdrop-blur-md shadow-xl",side:"bottom",align:"start",children:[(0,b.jsx)("button",{className:"absolute right-4 top-4 text-white hover:text-transparent bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-lg font-bold cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_6px_#22c55e]",title:"Fechar",onClick:()=>f(!1),children:"✕"}),(0,b.jsx)("div",{className:"mb-3 pr-6",children:(0,b.jsx)(A.Label,{className:"text-white text-sm",children:"Filtrar por Marcas"})}),(0,b.jsx)("div",{className:"max-h-72 overflow-auto pr-2 space-y-2",children:a.map(a=>{let e=c.includes(a);return(0,b.jsxs)("label",{className:"flex items-center gap-3 text-gray-200 text-sm cursor-pointer",children:[(0,b.jsx)(z.Checkbox,{id:`brand-${a}`,checked:e,onCheckedChange:b=>{!b?d(c.filter(b=>b!==a)):d([...new Set([...c,a])])},className:"border-neutral-600 data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-green-500 data-[state=checked]:to-green-600"}),(0,b.jsx)("span",{className:"truncate",title:a,children:a})]},a)})}),(0,b.jsxs)("div",{className:"flex justify-between gap-2 mt-4",children:[(0,b.jsx)(g.Button,{variant:"ghost",className:"text-gray-300 hover:text-white hover:scale-105 cursor-pointer",onClick:()=>d([]),children:"Limpar"}),(0,b.jsx)(g.Button,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white hover:scale-105 cursor-pointer rounded-xl",onClick:()=>f(!1),children:"Aplicar"})]})]})]}),(0,b.jsx)(D.AnimatePresence,{children:c.length>0&&(0,b.jsxs)(C.motion.div,{className:"flex flex-wrap items-center gap-2",initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.25},children:[c.map(a=>(0,b.jsxs)(C.motion.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.25},className:"flex items-center gap-1 bg-white/10 border border-green-500/50 text-white px-2 py-[3px] rounded-md text-xs cursor-pointer hover:bg-green-600/20 transition",onClick:()=>d(c.filter(b=>b!==a)),title:`Remover filtro: ${a}`,children:[(0,b.jsx)("span",{className:"truncate max-w-[100px]",children:a}),(0,b.jsx)("span",{className:"text-[11px] font-bold ml-1 bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent",children:"✕"})]},a)),(0,b.jsx)(C.motion.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.25},children:(0,b.jsx)(g.Button,{variant:"ghost",className:"text-gray-300 hover:text-white text-xs px-2 py-[3px] rounded-lg cursor-pointer hover:scale-105",onClick:()=>d([]),children:"Limpar tudo"})})]})})]})}var F=a.i(14574),G=a.i(49447),H=a.i(90166);function I({open:a,onOpenChange:e,mode:h,form:i,setForm:j,onSave:k}){let[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({message:"",type:null});(0,c.useEffect)(()=>{a&&"edit"===h&&p(i["Código"])},[a,h]);let s=async()=>{if(!i["Código"]||!i.Marca)return void r({message:"Preencha Código e Marca antes de salvar.",type:"error"});try{n(!0);let a={Código:i["Código"],Marca:i.Marca,"Custo Atual":i["Custo Atual"]||null,"Custo Antigo":i["Custo Antigo"]||null,NCM:i.NCM||null},b=null;if("create"===h){let{error:c}=await d.supabase.from("custos").insert([a]);b=c}else{let c=o||i["Código"],{error:e}=await d.supabase.from("custos").update(a).eq("Código",c);b=e}if(b)throw b;r({message:"create"===h?"Custo incluído com sucesso.":"Custo atualizado com sucesso.",type:"success"}),e(!1),k()}catch(a){console.error("Erro ao salvar custo:",a.message||a),r({message:"Erro ao salvar custo.",type:"error"})}finally{n(!1),setTimeout(()=>r({message:"",type:null}),3e3)}};return(0,b.jsxs)(b.Fragment,{children:[q.type&&(0,b.jsx)("div",{className:`fixed bottom-6 right-6 px-4 py-3 rounded-xl shadow-lg text-white text-sm transition-all duration-300 ${"success"===q.type?"bg-[#22c55e]":"bg-[#ef4444]"}`,children:q.message}),(0,b.jsx)(F.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(F.DialogContent,{className:"fixed top-1/2 left-1/2 z-50 -translate-x-1/2 -translate-y-1/2    bg-[#0f0f0f] border border-neutral-700 rounded-2xl shadow-2xl p-6    max-w-lg w-[90%] transition-all duration-300 ease-in-out",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.DollarSign,{className:"w-5 h-5 text-white"}),(0,b.jsx)(F.DialogTitle,{className:"text-white text-lg",children:"create"===h?"Novo Custo":"Editar Custo"}),(0,b.jsxs)("div",{className:"relative group cursor-default",children:[(0,b.jsx)(G.HelpCircle,{className:"w-4 h-4 text-neutral-400 ml-1"}),(0,b.jsx)("div",{className:"absolute left-6 top-0 w-56 bg-transparent text-neutral-400    text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"create"===h?"Preencha os campos e clique em Incluir.":"Edite os campos e clique em Salvar."})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-neutral-300",children:"Código"}),(0,b.jsx)(f.Input,{value:i["Código"],onChange:a=>j({...i,Código:a.target.value}),className:"bg-white/5 border-neutral-700 text-white rounded-xl",placeholder:"Ex: 5535"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-neutral-300",children:"Marca"}),(0,b.jsx)(f.Input,{value:i.Marca,onChange:a=>j({...i,Marca:a.target.value}),className:"bg-white/5 border-neutral-700 text-white rounded-xl",placeholder:"Ex: Liverpool"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-neutral-300",children:"Custo Atual"}),(0,b.jsx)(f.Input,{type:"text",value:String(i["Custo Atual"]||""),onChange:a=>j({...i,"Custo Atual":a.target.value}),className:"bg-white/5 border-neutral-700 text-white rounded-xl",placeholder:"Ex: 89.90"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(A.Label,{className:"text-neutral-300",children:"Custo Antigo"}),(0,b.jsx)(f.Input,{type:"text",value:String(i["Custo Antigo"]||""),onChange:a=>j({...i,"Custo Antigo":a.target.value}),className:"bg-white/5 border-neutral-700 text-white rounded-xl",placeholder:"Ex: 79.90"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)(A.Label,{className:"text-neutral-300",children:"NCM"}),(0,b.jsx)(f.Input,{value:i.NCM,onChange:a=>j({...i,NCM:a.target.value}),className:"bg-white/5 border-neutral-700 text-white rounded-xl",placeholder:"Ex: 85182100"})]})]}),(0,b.jsxs)(F.DialogFooter,{className:"mt-5",children:[(0,b.jsx)(g.Button,{variant:"outline",className:"border-neutral-700 text-white hover:scale-105 cursor-pointer",onClick:()=>e(!1),disabled:m,children:"Cancelar"}),(0,b.jsx)(g.Button,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white hover:scale-105 cursor-pointer flex items-center justify-center gap-2",onClick:s,disabled:m,children:m?(0,b.jsx)(l.Loader,{className:"h-5 w-5 animate-spin"}):"create"===h?"Incluir":"Salvar"})]})]})})]})}var J=a.i(26251),K=a.i(24722),L=a.i(70362);function M({open:a,onOpenChange:c,onExportModeloAlteracao:d}){let e=["Código","Marca","Custo Atual","Custo Antigo","NCM"];return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(F.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl    shadow-2xl text-white max-w-2xl p-6",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(K.FileSpreadsheet,{className:"w-5 h-5 text-white"}),"Edição em Massa"]})}),(0,b.jsxs)(C.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,b.jsx)("div",{className:"rounded-xl p-4 bg-white/5 border border-neutral-700",children:(0,b.jsxs)("p",{className:"text-neutral-300 text-sm leading-relaxed",children:["Baixe um modelo, preencha os dados e depois use"," ",(0,b.jsx)("strong",{className:"text-white",children:"Importar"})," na tela principal para atualizar ou incluir custos."]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer",onClick:()=>{let a=["Código","Marca","Custo Atual","Custo Antigo","NCM"],b=L.utils.aoa_to_sheet([a]),c={font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"1A8CEB"}},alignment:{horizontal:"center",vertical:"center"}};a.forEach((a,d)=>{let e=L.utils.encode_cell({r:0,c:d});b[e]||(b[e]={}),b[e].s=c}),b["!cols"]=[{wch:15},{wch:20},{wch:15},{wch:15},{wch:12}],L.utils.sheet_add_aoa(b,[["12345","Liverpool","250.00","240.00","851821"],["67890","SKP","310.00","299.00","852729"],["11223","IZZO","199.00","189.00","853690"],["44556","Fischer","430.00","415.00","854370"],["77889","Trapp","285.00","270.00","851890"]],{origin:-1});let d=L.utils.book_new();L.utils.book_append_sheet(d,b,"Inclusão");let e=new Date,f=String(e.getDate()).padStart(2,"0"),g=String(e.getMonth()+1).padStart(2,"0"),h=e.getFullYear(),i=String(e.getHours()).padStart(2,"0"),j=String(e.getMinutes()).padStart(2,"0"),k=String(e.getSeconds()).padStart(2,"0"),l=`INCLUS\xc3O - ${f}-${g}-${h} ${i}-${j}-${k}.xlsx`;L.writeFile(d,l)},children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#10b98120"},children:(0,b.jsx)(J.FileDown,{className:"w-6 h-6",style:{color:"#10b981"}})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-bold mb-1",children:"Modelo de Inclusão"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Baixe o modelo base para novos custos"})]})]})}),(0,b.jsx)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-300 cursor-pointer",onClick:d,children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:"#f59e0b20"},children:(0,b.jsx)(K.FileSpreadsheet,{className:"w-6 h-6",style:{color:"#f59e0b"}})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-bold mb-1",children:"Modelo de Alteração"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Baixe o modelo para atualizar custos existentes"})]})]})})]}),(0,b.jsx)("div",{className:"border border-neutral-700 rounded-xl overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm text-neutral-300 border-collapse",children:[(0,b.jsx)("thead",{className:"bg-neutral-800/80 text-white sticky top-0",children:(0,b.jsx)("tr",{children:e.map(a=>(0,b.jsx)("th",{className:"p-2 border-b border-neutral-700 text-left font-semibold",children:a},a))})}),(0,b.jsx)("tbody",{children:[{Código:"12345",Marca:"Liverpool","Custo Atual":"250.00","Custo Antigo":"240.00",NCM:"851821"},{Código:"67890",Marca:"SKP","Custo Atual":"310.00","Custo Antigo":"299.00",NCM:"852729"},{Código:"11223",Marca:"IZZO","Custo Atual":"199.00","Custo Antigo":"189.00",NCM:"853690"},{Código:"44556",Marca:"Fischer","Custo Atual":"430.00","Custo Antigo":"415.00",NCM:"854370"},{Código:"77889",Marca:"Trapp","Custo Atual":"285.00","Custo Antigo":"270.00",NCM:"851890"}].map((a,c)=>(0,b.jsx)("tr",{className:`${c%2==0?"bg-neutral-900/40":"bg-neutral-800/40"} hover:bg-white/10 transition-colors`,children:e.map(c=>(0,b.jsx)("td",{className:"p-2 border-b border-neutral-800",children:a[c]},c))},c))})]})}),(0,b.jsx)("p",{className:"text-sm text-neutral-400 italic",children:"Mantenha os cabeçalhos exatamente como no modelo para evitar erros na importação."})]}),(0,b.jsx)(F.DialogFooter,{className:"mt-6 flex justify-end",children:(0,b.jsx)(g.Button,{variant:"outline",className:"border-neutral-700 text-white hover:bg-white/10 transition-all rounded-xl",onClick:()=>c(!1),children:"Fechar"})})]})})}var N=a.i(73570);function O({open:a,onOpenChange:c,count:d,onConfirm:e,loading:f}){return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(F.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl text-white max-w-md shadow-2xl",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,b.jsx)(N.AlertTriangle,{className:"w-5 h-5 text-red-400"}),"Excluir Produto(s)"]})}),(0,b.jsxs)(C.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"mt-3 space-y-3",children:[(0,b.jsxs)("p",{className:"text-neutral-300",children:["Deseja realmente excluir"," ",(0,b.jsx)("span",{className:"text-white font-semibold",children:d})," ",1===d?"produto selecionado":"produtos selecionados","?"]}),(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 text-sm text-red-300 flex items-start gap-2",children:[(0,b.jsx)(N.AlertTriangle,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{className:"text-red-400",children:"Atenção:"})," Esta ação é permanente e não poderá ser desfeita."]})]})]}),(0,b.jsxs)(F.DialogFooter,{className:"mt-5 flex justify-end gap-3",children:[(0,b.jsx)(g.Button,{variant:"outline",className:"border-neutral-700 text-white hover:scale-105 transition-all cursor-pointer",onClick:()=>c(!1),disabled:f,children:"Cancelar"}),(0,b.jsx)(g.Button,{className:"bg-gradient-to-r from-[#ef4444] to-[#dc2626] hover:scale-105 text-white flex items-center gap-2 cursor-pointer",onClick:e,disabled:f,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader,{className:"animate-spin w-5 h-5"}),"Excluindo..."]}):"Excluir"})]})]})})}function P({open:a,onOpenChange:c,count:d,onConfirm:e,loading:f,preview:h=[],warnings:i=[]}){let j=h.length>0?Object.keys(h[0]):[];return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(F.DialogContent,{className:"bg-[#0f0f0f]/95 backdrop-blur-xl border border-neutral-700 rounded-2xl text-white max-w-3xl shadow-2xl",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsx)(F.DialogTitle,{className:"text-lg font-semibold text-white",children:"Confirmar Importação"})}),(0,b.jsxs)("div",{className:"space-y-4 mt-2",children:[(0,b.jsxs)("p",{className:"text-neutral-300",children:["Foram detectados"," ",(0,b.jsx)("span",{className:"text-white font-semibold",children:d})," ","custos no arquivo. Deseja realmente importá-los?"]}),i.length>0&&(0,b.jsxs)(C.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-3 text-sm text-yellow-300 flex items-start gap-2",children:[(0,b.jsx)(N.AlertTriangle,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{className:"text-yellow-400",children:"Atenção:"}),(0,b.jsx)("ul",{className:"list-disc list-inside mt-1",children:i.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]}),h.length>0&&(0,b.jsx)("div",{className:"mt-4 max-h-60 overflow-auto rounded-xl border border-neutral-700",children:(0,b.jsxs)("table",{className:"w-full text-sm text-neutral-300",children:[(0,b.jsx)("thead",{className:"bg-neutral-800 sticky top-0",children:(0,b.jsx)("tr",{children:j.map(a=>(0,b.jsx)("th",{className:"text-left p-2 font-semibold whitespace-nowrap",children:a},a))})}),(0,b.jsx)("tbody",{children:h.map((a,c)=>(0,b.jsx)("tr",{className:"odd:bg-neutral-900 even:bg-neutral-800/50 transition-colors",children:j.map(c=>(0,b.jsx)("td",{className:"p-2",children:a[c]??"-"},c))},c))})]})})]}),(0,b.jsxs)(F.DialogFooter,{className:"mt-5 flex justify-end gap-3",children:[(0,b.jsx)(g.Button,{variant:"outline",className:"border-neutral-700 text-white hover:scale-105 cursor-pointer",onClick:()=>c(!1),disabled:f,children:"Cancelar"}),(0,b.jsx)(g.Button,{className:"bg-gradient-to-r from-[#22c55e] to-[#16a34a] hover:scale-105 text-white flex items-center gap-2 cursor-pointer",onClick:e,disabled:f,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader,{className:"animate-spin w-5 h-5"}),"Importando..."]}):"Confirmar"})]})]})})}var Q=a.i(70179);async function R(a,b){if(!a||0===a.length)return void alert("Nenhum dado encontrado para exportar.");let c=["Código","Marca","Custo Atual","Custo Antigo","NCM"],d=a.map(a=>({Código:a["Código"]??"",Marca:a.Marca??"","Custo Atual":Number(a["Custo Atual"]??0),"Custo Antigo":Number(a["Custo Antigo"]??0),NCM:a.NCM??""})),e={fill:{type:"pattern",patternType:"solid",fgColor:{rgb:"1A8CEB"}},font:{bold:!0,color:{rgb:"FFFFFF"}},alignment:{horizontal:"center",vertical:"center"}},f=await new Promise(a=>{setTimeout(()=>{let b=[c,...d.map(a=>[a["Código"],a.Marca,a["Custo Atual"],a["Custo Antigo"],a.NCM])],f=L.utils.aoa_to_sheet(b);c.forEach((a,b)=>{let c=L.utils.encode_cell({r:0,c:b});f[c]&&(f[c].s=e)}),f["!cols"]=[{wch:16},{wch:20},{wch:14},{wch:14},{wch:14}];let g=L.utils.book_new();L.utils.book_append_sheet(g,f,"Relatorio"),a(new Blob([L.write(g,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"}))},50)}),g=b.endsWith(".xlsx")?b:`${b}.xlsx`;(0,Q.saveAs)(f,g)}var S=a.i(75750);async function T(a,b=!1){let c=[],e=await a.arrayBuffer(),f=S.read(e,{type:"array",codepage:65001,cellDates:!0}),g=f.Sheets[f.SheetNames[0]],h=S.utils.sheet_to_json(g,{defval:""}),i=Object.keys(h[0]||{}),j=["Código","Marca","Custo Atual","Custo Antigo","NCM"].filter(a=>!i.some(b=>b.trim().toLowerCase()===a.trim().toLowerCase()));j.length>0&&c.push(`As seguintes colunas est\xe3o ausentes: ${j.join(", ")}.`);let k=a=>{if(null==a||""===a)return 0;let b=String(a).trim(),c=parseFloat(b=(b=b.replace(/\./g,"")).replace(",","."));return isNaN(c)?0:c},l=h.map(a=>{let b=b=>{let c=Object.keys(a).find(a=>b.some(b=>a.trim().toLowerCase()===b.trim().toLowerCase()));return c?a[c]:void 0},c=b(["Código","codigo","code"]);return c&&""!==String(c).trim()?{Código:String(c).trim(),Marca:b(["Marca","marca","brand"])||null,"Custo Atual":k(b(["Custo Atual","custo atual"])),"Custo Antigo":k(b(["Custo Antigo","custo antigo"])),NCM:b(["NCM","ncm"])||null}:null}).filter(a=>null!==a);if(b)return{data:l,warnings:c};let{error:m}=await d.supabase.from("custos").insert(l,{upsert:!0});if(m)throw m;return{data:l,warnings:c}}function U(){let[a,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(!0),[w,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(50),[B,C]=(0,c.useState)(""),[D,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[J,K]=(0,c.useState)(!1),[L,N]=(0,c.useState)(null),[Q,S]=(0,c.useState)("asc"),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)("create"),[Y,Z]=(0,c.useState)({Código:"",Marca:"","Custo Atual":"","Custo Antigo":"",NCM:""}),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(0),[ae,af]=(0,c.useState)([]),[ag,ah]=(0,c.useState)(!1),ai=(0,c.useRef)(null),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)([]),[an,ao]=(0,c.useState)([]),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)({message:"",type:null}),[av,aw]=(0,c.useState)(null),ax=(a,b)=>{a&&(navigator.clipboard.writeText(a),aw(b),setTimeout(()=>aw(null),1500))},ay=async()=>{let{count:a}=await d.supabase.from("custos").select("*",{count:"exact",head:!0}),b=Math.max(1,Math.ceil((a||0)/2e3)),c=new Set;for(let a=1;a<=b;a++){let b=(a-1)*2e3,e=b+2e3-1,{data:f,error:g}=await d.supabase.from("custos").select("Marca").range(b,e);if(g)break;(f||[]).forEach(a=>{a?.Marca&&c.add(a.Marca)})}F(Array.from(c).sort((a,b)=>a.localeCompare(b)))},az=(a=!1)=>{let b=d.supabase.from("custos").select("*",{count:"exact",head:a});return""!==B.trim()&&(b=b.or(`C\xf3digo.ilike.%${B}%,Marca.ilike.%${B}%,NCM.ilike.%${B}%`)),G.length>0&&(b=b.in("Marca",G)),L&&(b=b.order(L,{ascending:"asc"===Q})),b},aA=async(a=w,b=z)=>{v(!0);let c=(a-1)*b,{count:d}=await az(!0);t(d||0);let{data:e,error:f}=await az(!1).range(c,c+b-1);!f&&e&&r(e),setTimeout(()=>v(!1),400)};(0,c.useEffect)(()=>{ay()},[]),(0,c.useEffect)(()=>{aA(w,z)},[w,z,L,Q]),(0,c.useEffect)(()=>{y(1),aA(1,z)},[B,G]);let aB=async()=>{let{count:a}=await az(!0),b=Math.max(1,Math.ceil((a||0)/1e3)),c=[];for(let a=1;a<=b;a++){let b=(a-1)*1e3,d=b+1e3-1,{data:e,error:f}=await az(!1).range(b,d);if(f)break;c=c.concat(e||[])}return c},aC=async()=>{let a=an.length>0?an:await aB();if(!a||0===a.length)return void alert("Nenhum dado encontrado para exportar.");let b=new Date,c=String(b.getDate()).padStart(2,"0"),d=String(b.getMonth()+1).padStart(2,"0"),e=b.getFullYear(),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0"),h=`${f}h${g}m`,i="";G.length>0&&(i=G.map(a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z]/g,"").substring(0,3).toUpperCase()).join("-"));let j=an.length>0?"CUSTOS-SELECIONADOS":"CUSTOS",k=i?`-${i}`:"";R(a,`${j}${k}-${c}-${d}-${e}-${h}.xlsx`)},aD=async()=>{await aA(w,z),await ay()},aE=async()=>{if(0!==an.length)try{as(!0);let a=an.map(a=>a["Código"]),{error:b}=await d.supabase.from("custos").delete().in("Código",a);if(b)throw b;aq(!1),ao([]),await aA(w,z),await ay(),au({message:1===an.length?"1 produto excluído com sucesso.":`${an.length} produtos exclu\xeddos com sucesso.`,type:"success"})}catch(a){console.error("Erro ao excluir:",a),au({message:"Erro ao excluir produtos.",type:"error"})}finally{as(!1),setTimeout(()=>au({message:"",type:null}),3e3)}},aF=async a=>{let b=a.target.files?.[0];if(b)try{let{data:a,warnings:c}=await T(b,!0);ak(b),ad(a.length),af(a.slice(0,5)),am(c||[]),ab(!0)}catch(a){console.error("Erro ao ler arquivo:",a),au({message:"Erro ao ler o arquivo.",type:"error"})}finally{a.currentTarget.value=""}},aG=async()=>{if(aj){ah(!0);try{await T(aj),await aA(),au({message:"Importação concluída com sucesso!",type:"success"})}catch(a){console.error(a),au({message:"Erro ao importar arquivo.",type:"error"})}finally{ah(!1),ab(!1),ak(null),setTimeout(()=>au({message:"",type:null}),3e3)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#0a0a0a] via-[#0f0f0f] to-[#0a0a0a] p-8",children:[at.type&&(0,b.jsx)("div",{className:`fixed bottom-6 right-6 px-4 py-3 rounded-xl shadow-lg text-white text-sm transition-all duration-300 ${"success"===at.type?"bg-[#22c55e]":"bg-[#ef4444]"}`,children:at.message}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)(e.GlassmorphicCard,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap justify-between items-center border-b border-neutral-700 p-4 gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400 w-5 h-5"}),(0,b.jsx)(f.Input,{placeholder:"Buscar por código, marca ou NCM...",value:B,onChange:a=>C(a.target.value),className:"pl-10 bg-white/5 border-neutral-700 text-white rounded-xl"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)(E,{allBrands:D,selectedBrands:G,setSelectedBrands:H,open:J,onOpenChange:K}),(0,b.jsx)("input",{type:"file",ref:ai,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",className:"hidden",onChange:aF}),(0,b.jsxs)(g.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:()=>{ai.current&&(ai.current.value="",ai.current.click())},children:[(0,b.jsx)(p.Upload,{className:"w-4 h-4 mr-2"})," Importar"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:aC,children:[(0,b.jsx)(j.Download,{className:"w-4 h-4 mr-2"})," Exportar"]}),an.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(g.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:()=>aq(!0),children:[(0,b.jsx)(o.Trash2,{className:"w-4 h-4 mr-2"})," Excluir Selecionados"]}),(0,b.jsx)(g.Button,{variant:"outline",className:"border-neutral-700 hover:scale-105 transition-all text-white rounded-xl cursor-pointer",onClick:()=>ao([]),children:"Desmarcar Todos"})]}),(0,b.jsxs)(g.Button,{className:"bg-gradient-to-r from-[#1A8CEB] to-[#0d64ab] hover:scale-105 transition-all rounded-xl text-white cursor-pointer",onClick:()=>_(!0),children:[(0,b.jsx)(m.Layers,{className:"w-4 h-4 mr-2"})," Edição em Massa"]}),(0,b.jsx)(g.Button,{className:"bg-gradient-to-r from-green-500 to-green-600 hover:scale-105 transition-all rounded-xl text-white cursor-pointer",onClick:()=>{X("create"),Z({Código:"",Marca:"","Custo Atual":"","Custo Antigo":"",NCM:""}),V(!0)},children:"+ Novo Custo"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"border-neutral-700",children:[(0,b.jsx)(h.TableHead,{className:"w-[40px] text-center",children:(0,b.jsx)("input",{type:"checkbox",className:"w-4 h-4 cursor-pointer accent-[#1A8CEB]",style:{accentColor:"#1A8CEB"},checked:an.length===a.length&&a.length>0,onChange:b=>{b.target.checked?ao(a):ao([])}})}),["Código","Marca","Custo Atual","Custo Antigo","NCM"].map(a=>(0,b.jsx)(h.TableHead,{onClick:()=>{L===a?S("asc"===Q?"desc":"asc"):(N(a),S("asc"))},className:`font-semibold cursor-pointer transition-colors select-none 
                      hover:text-white ${L===a?"text-white":"text-neutral-400"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[a,(0,b.jsx)(i.ArrowUpDown,{className:`h-3 w-3 transition-colors ${L===a?"text-white":"text-neutral-500"}`})]})},a)),(0,b.jsx)(h.TableHead,{className:"w-[120px] text-neutral-400 font-semibold text-center",children:"Ações"})]})}),(0,b.jsx)(h.TableBody,{children:u?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:7,children:(0,b.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,b.jsx)(l.Loader,{className:"animate-spin h-8 w-8 text-neutral-400"})})})}):0===a.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:7,className:"text-center text-neutral-400 py-8",children:"Nenhum registro encontrado"})}):a.map((a,c)=>{let d=an.some(b=>b["Código"]===a["Código"]);return(0,b.jsxs)(h.TableRow,{className:`border-b border-neutral-700 transition-colors ${d?"bg-white/10 hover:bg-white/20":"hover:bg-white/5"}`,children:[(0,b.jsx)(h.TableCell,{className:"text-center",children:(0,b.jsx)("input",{type:"checkbox",checked:d,onChange:b=>{b.target.checked?ao([...an,a]):ao(an.filter(b=>b["Código"]!==a["Código"]))},className:"w-4 h-4 cursor-pointer accent-[#1A8CEB]",style:{accentColor:"#1A8CEB"}})}),(0,b.jsx)(h.TableCell,{className:"text-white text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:[a["Código"],(0,b.jsx)("button",{onClick:()=>ax(a["Código"]||"",`codigo-${c}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${av===`codigo-${c}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsx)(h.TableCell,{className:"text-neutral-300",children:a.Marca}),(0,b.jsx)(h.TableCell,{className:"text-neutral-300 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:["R$ ",Number(a["Custo Atual"]||0).toFixed(2),(0,b.jsx)("button",{onClick:()=>ax(String(Number(a["Custo Atual"]||0).toFixed(2)),`custo-${c}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${av===`custo-${c}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsxs)(h.TableCell,{className:"text-neutral-300 text-center",children:["R$ ",Number(a["Custo Antigo"]||0).toFixed(2)]}),(0,b.jsx)(h.TableCell,{className:"text-neutral-300 text-center",children:(0,b.jsxs)("div",{className:"flex justify-center items-center gap-1 group",children:[a.NCM,(0,b.jsx)("button",{onClick:()=>ax(a.NCM||"",`ncm-${c}`),title:"Copiar",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer",children:(0,b.jsx)(q.CopyIcon,{className:`w-3 h-3 transition-all duration-300 ${av===`ncm-${c}`?"text-blue-500 scale-110":"text-white group-hover:text-blue-400"}`})})]})}),(0,b.jsxs)(h.TableCell,{className:"flex gap-2 justify-center",children:[(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",className:"text-white hover:text-[#1a8ceb] hover:scale-105 transition-all cursor-pointer",onClick:()=>{X("edit"),Z({Código:a["Código"]||"",Marca:a.Marca||"","Custo Atual":a["Custo Atual"]||"","Custo Antigo":a["Custo Antigo"]||"",NCM:a.NCM||""}),V(!0)},title:"Editar",children:(0,b.jsx)(k.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{size:"sm",variant:"ghost",className:"text-white hover:text-[#ef4444] hover:scale-105 transition-all cursor-pointer",onClick:()=>{ao([a]),aq(!0)},title:"Excluir",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]},`${a["Código"]}-${c}`)})})]})})]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(x,{currentPage:w,totalPages:Math.ceil(s/z),itemsPerPage:z,totalItems:s,onPageChange:a=>y(a),onItemsPerPageChange:a=>{A(a),y(1)},selectedCount:an.length})})]}),(0,b.jsx)(I,{open:U,onOpenChange:V,mode:W,form:Y,setForm:Z,onSave:aD}),(0,b.jsx)(O,{open:ap,onOpenChange:aq,count:an.length,onConfirm:aE,loading:ar}),(0,b.jsx)(M,{open:$,onOpenChange:_,onExportModeloAlteracao:aC}),(0,b.jsx)(P,{open:aa,onOpenChange:ab,count:ac,onConfirm:aG,loading:ag,preview:ae,warnings:al})]})}function V(){return(0,b.jsx)(U,{})}a.s(["default",()=>V],23518)}];

//# sourceMappingURL=src_app_dashboard_precificacao_custos_page_tsx_e7fad7b7._.js.map